# 采样、量化

### 量化

在数字信号处理领域，**量化**主要应用于从连续的模拟信号到数字信号的转换，其作用是将信号的连续取值（或大量可能的离散取值）近似为有限多个（或较少的）离散值，即量化相当于一个多对一的映射过程，通过量化降低了数据量。

量化器的一些参数：**bit**——若嘉定量化的级别，即重构值的个数为L，则表示这些量化索引所用的比特数为 log~2~L。例如，对于8级量化，需要3个比特来表示所有的量化值。

<img src="https://img-blog.csdnimg.cn/cfaf0faebf9343fead49b9f1552a9cce.png" style="zoom: 33%;" />

上图为中升型均匀量化。实质是把一段X映射到同一个Y输出。

<img src="https://img-blog.csdnimg.cn/fd601c263cc24d0abf8dac8b5d43a4be.png" style="zoom: 50%;" />

下图、上图为各比特表示量化值示意图。

<img src="https://img-blog.csdnimg.cn/5017cc37cd5047e5960869710f699801.png" style="zoom:50%;" />

可以看到1bit时，只有2^1^个色彩层次，以此类推。

### 采样

二维空间中图像的离散化称为采样，它是实现图像数字化的重要环节，决定着图像的空间分辨率。在图像采集中，传感器输出连续变化的电压信号，得到的是模拟信号图像。为了产生数字图像，需要对模拟信号图像采样。由于二维空间信号的每个点都是独立变量函数，可以通过采样每个点水平和垂直方向的灰度值，构成一个离散函数f(x,y)，然后用它代表像素点，构成数字图像。下图为采样过程：

<img src="https://img-blog.csdnimg.cn/img_convert/f4037ea0a9a9bce1dba4be9cffacdf1f.png" style="zoom:50%;" />

![](https://img-blog.csdnimg.cn/img_convert/4b9e5e03ef06c249105d968ac95d8478.png)

###  RGB和YUV颜色空间的差异，为何电视系统中采用YUV

#### RGB

在图像显示中，⼀张 1280 * 720 ⼤小的图片，就代表着它有 1280 * 720 个像素点。其中每一个像素点的颜色显示都采用 RGB 编码方法，将 RGB 分别取不同的值，就会展示不同的颜⾊。

RGB 图像中，每个像素点都有红、绿、蓝三个原色，其中每种原色都占用 8 bit，也就是1个字节，那 么⼀个像素点也就占用 24 bit，也就是3个字节。

> 一张 `1280 * 720` ⼤小的图⽚，就占⽤ `1280 * 720 * 3 / 1024 / 1024 = 2.63 MB` 存储空间

**显然，当作为视频流使用RGB时，其视频体积将达到非常夸张的大小。**

#### TUV

`YUV`颜色编码采用的是**明亮度**和**色度**来指定像素的颜色。其中，`Y`表示**明亮度**（`LUminance、Luma`），而`U`和`V`表示**色度**（`Chrominance、Chroma`）。而**色度**又定义了颜色的两个方面：**色调**和**饱和度**。

使用视觉三基本参量：`亮度、色调、饱和度`定义像素的颜色。

#### 为什么要使用YUV 颜色编码?

> 1. 没有UV信息一样可以显示完整的图像，只不过是黑白的，这样的设计很好地解决了彩色电视机与黑白电视的兼容问题。
> 2. YUV不像RGB那样要求三个独立的视频信号同时传输，所以用YUV方式传送占用极少的频宽。



###### YUV采样格式 — YUV 4 : 4 : 4

`YUV 4:4:4`采样，意味着`Y、U、V`三个分量的采样⽐例相同，因此在⽣成的图像里，每个像素的三个分量量信息完整，都是`8 bit`，也就是`1`个字节。全部三个分量就是3字节，**并没有达到节省带宽的目的**。

###### YUV 采样格式 — YUV 4 : 2 : 2

`YUV 4:2:2`采样，意味着`UV分量`是`Y分量`采样的⼀半，`Y分量`和`UV分量`按照`2 : 1` 的比例采样。
 如果水平⽅向有`10`个像素点，那么采样了`10`个`Y分量`，⽽只采样了`5`个`UV分量`。`YUV 4:2:2`采样的图像比`RGB`模型图像**节省了三分之一的存储空间**，在传输时占⽤的带宽也会随之减少。

###### YUV 采样格式 — YUV 4 : 2 : 0

`YUV 4:2:0`采样，并不是指只采样`U分量`⽽不采样`V分量`。而是指，在每⼀行扫描时，只扫描一种⾊度分量(`U`或者`V`)，和`Y分量`按照 `2 : 1`的⽅式采样。比如，第⼀行扫描时，`YU分量`按照 `2 : 1`的方式采样，那么第二行扫描时，`YV分量`按照`2:1`的方式采样。对于每个色度分量来说，它的⽔平⽅向和竖直方向的采样和`Y分量`相比都是`2:1` 。假设第一行扫描了`U 分量`，第⼆行扫描了`V 分量`，那么需要扫描两行才能够组成完整的`UV分量`

###### YUV 采样格式 — YUV 4 : 1 : 1

YUV 4:1:1 是指水平 Y 取样四个点，UV 各只取样一个点，水平的 Y 和 UV 的取样比例是 4:1，也就是 
Y Y Y Y 一个 U 一个 V .... 

和 YUV 4:1:1 一样，色度和亮度差 1/2 * 1/2 = 1/4，只是取样的方式不同。 

而 MPEG 最常采用的 YUV 4:2:0 格式，其 UV 的取样位置，MPEG-1 和 MPEG-2 又不同（MPEG-4 是用和 MPEG-2 一样的取样位置） 

#### 如何计算一帧图像的大小？

分辨率×位深/8

#### 电视系统中量化过程中的“截断”处理是什么意思？

在电视系统中，图像和声音都是以数字信号的形式进行处理和传输的。在这个过程中，信号被量化成离散的数字值，以便数字信号可以被存储、传输和处理。

在量化过程中，由于数字值的范围是有限的，因此某些信号的幅度可能会超出可表示的范围。这时，就需要进行“截断”处理，即将超出范围的部分直接截取掉，使其符合可表示的范围内。

例如，在视频信号中，如果某个像素的亮度值超出了可表示的范围（比如超过了8位二进制数的最大值255），那么这个像素的亮度值将被截断，以便它可以被正确地表示和传输。这可能会导致图像质量的损失，因为被截断的信号信息被丢失了。因此，在电视系统中，尽可能避免截断处理，以保持信号的完整性和质量。

#### 线性量化和非线性量化，或称均匀量化和非均匀量化

**线性量化**的特点是在整个量化范围内，个各量化间隔都相等，即量化步长是固定的。**非线性量化**是将模拟信号的幅度值在某些区域内更紧密、更密集地映射到量化函数上，即量化步长是变化的。

量化步长是否固定就是最大区别。因此，线性量化中量化误差是均匀的，非线性量化中量化误差在不同区域内是不同的。因此，非线性量化可以提供更高的信噪比，尤其是在低幅度值的区域内。然而，非线性量化的缺点是它会引入不均匀的失真，这是由于在某些区域内将幅度值更密集的映射导致的。所以，线性量化信噪比可能较低，但失真均匀。
